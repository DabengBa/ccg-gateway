# CCG Gateway

<div align="center">

**æ™ºèƒ½ AI æ¨¡å‹ç½‘å…³ | ç»Ÿä¸€ä»£ç† Â· è´Ÿè½½å‡è¡¡ Â· æ•…éšœè½¬ç§»**

[![Python](https://img.shields.io/badge/Python-3.10+-blue.svg)](https://www.python.org/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.115+-green.svg)](https://fastapi.tiangolo.com/)
[![Vue](https://img.shields.io/badge/Vue-3.5+-brightgreen.svg)](https://vuejs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.9+-blue.svg)](https://www.typescriptlang.org/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

</div>

## ğŸ“– é¡¹ç›®ç®€ä»‹

CCG Gateway æ˜¯ä¸€ä¸ªä¸ºå¤šç§ AI CLI å·¥å…·ï¼ˆClaude Codeã€Codexã€Geminiï¼‰è®¾è®¡çš„æ™ºèƒ½ç½‘å…³æœåŠ¡ï¼Œæä¾›ç»Ÿä¸€çš„ä»£ç†æ¥å£ã€æ™ºèƒ½è´Ÿè½½å‡è¡¡å’Œè‡ªåŠ¨æ•…éšœè½¬ç§»èƒ½åŠ›ã€‚æ”¯æŒæ¡Œé¢åº”ç”¨å’Œ Web æœåŠ¡ä¸¤ç§éƒ¨ç½²æ¨¡å¼ï¼Œè®© AI æœåŠ¡çš„ä½¿ç”¨æ›´åŠ ç¨³å®šå¯é ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ¯ **æ™ºèƒ½è·¯ç”±** - åŸºäºä¼˜å…ˆçº§å’Œå¯ç”¨æ€§çš„è‡ªåŠ¨æœåŠ¡å•†é€‰æ‹©
- ğŸ”„ **è´Ÿè½½å‡è¡¡** - å¤šæœåŠ¡å•†é…ç½®ï¼Œè‡ªåŠ¨åˆ†å‘è¯·æ±‚
- ğŸ›¡ï¸ **æ•…éšœè½¬ç§»** - å®æ—¶æ£€æµ‹æœåŠ¡å•†çŠ¶æ€ï¼Œè‡ªåŠ¨åˆ‡æ¢å¤‡ç”¨èŠ‚ç‚¹
- ğŸ—ºï¸ **æ¨¡å‹æ˜ å°„** - çµæ´»çš„æ¨¡å‹åç§°æ˜ å°„ï¼Œæ”¯æŒå¤š CLI å·¥å…·
- ğŸ“Š **å®æ—¶ç›‘æ§** - å®Œæ•´çš„è¯·æ±‚æ—¥å¿—å’Œç»Ÿè®¡åˆ†æ
- ğŸ–¥ï¸ **æ¡Œé¢åº”ç”¨** - åŸºäº PyWebView çš„åŸç”Ÿæ¡Œé¢ä½“éªŒ
- ğŸŒ **Web ç•Œé¢** - ç°ä»£åŒ–çš„ Vue 3 ç®¡ç†ç•Œé¢
- âš™ï¸ **åŠ¨æ€é…ç½®** - è¿è¡Œæ—¶ä¿®æ”¹é…ç½®ï¼Œæ— éœ€é‡å¯æœåŠ¡

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Python | 3.10+ | æ ¸å¿ƒè¯­è¨€ |
| FastAPI | 0.115+ | å¼‚æ­¥ Web æ¡†æ¶ |
| SQLAlchemy | 2.0+ | å¼‚æ­¥ ORM |
| SQLite | 3.x | æ•°æ®å­˜å‚¨ |
| httpx | 0.28+ | å¼‚æ­¥ HTTP å®¢æˆ·ç«¯ |
| Pydantic | 2.0+ | æ•°æ®éªŒè¯ |
| PyWebView | 5.3+ | æ¡Œé¢åº”ç”¨æ¡†æ¶ |
| uv | latest | åŒ…ç®¡ç†å™¨ |

### å‰ç«¯æŠ€æœ¯æ ˆ

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Vue | 3.5+ | å‰ç«¯æ¡†æ¶ |
| TypeScript | 5.9+ | ç±»å‹ç³»ç»Ÿ |
| Element Plus | 2.9+ | UI ç»„ä»¶åº“ |
| Pinia | 2.3+ | çŠ¶æ€ç®¡ç† |
| Vue Router | 4.5+ | è·¯ç”±ç®¡ç† |
| Vite | 5.4+ | æ„å»ºå·¥å…· |
| pnpm | 9.x | åŒ…ç®¡ç†å™¨ |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.10+
- Node.js 18+
- pnpm 9.x
- uv (Python åŒ…ç®¡ç†å™¨)

### å®‰è£…ä¾èµ–

```bash
# å®‰è£…åç«¯ä¾èµ–
cd backend
uv sync

# å®‰è£…å‰ç«¯ä¾èµ–
cd frontend
pnpm install
```

### å¼€å‘æ¨¡å¼

#### æ–¹å¼ä¸€ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# å¯åŠ¨åç«¯æœåŠ¡
start-backend.bat

# å¯åŠ¨å‰ç«¯æœåŠ¡ï¼ˆæ–°ç»ˆç«¯ï¼‰
start-frontend.bat
```

#### æ–¹å¼äºŒï¼šæ‰‹åŠ¨å¯åŠ¨

```bash
# å¯åŠ¨åç«¯
cd backend
uv run uvicorn app.main:app --reload --host 0.0.0.0 --port 8000

# å¯åŠ¨å‰ç«¯
cd frontend
pnpm dev
```

è®¿é—® `http://localhost:5173` å³å¯ä½¿ç”¨ Web ç•Œé¢ã€‚

### æ¡Œé¢åº”ç”¨æ¨¡å¼

```bash
# æ„å»ºæ¡Œé¢åº”ç”¨
build.bat

# è¿è¡Œæ¡Œé¢åº”ç”¨
cd backend/dist/ccg-gateway
ccg-gateway.exe
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
ccg-gateway/
â”œâ”€â”€ backend/                 # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/            # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ core/           # æ ¸å¿ƒé…ç½®
â”‚   â”‚   â”œâ”€â”€ models/         # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ schemas/        # Pydantic æ¨¡å¼
â”‚   â”‚   â”œâ”€â”€ services/       # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â””â”€â”€ main.py         # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ pyproject.toml      # Python ä¾èµ–é…ç½®
â”‚   â””â”€â”€ uv.lock             # ä¾èµ–é”å®šæ–‡ä»¶
â”œâ”€â”€ frontend/               # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/           # API æ¥å£
â”‚   â”‚   â”œâ”€â”€ components/    # Vue ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ stores/        # Pinia çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ types/         # TypeScript ç±»å‹
â”‚   â”‚   â”œâ”€â”€ views/         # é¡µé¢è§†å›¾
â”‚   â”‚   â””â”€â”€ main.ts        # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ package.json       # å‰ç«¯ä¾èµ–é…ç½®
â”‚   â””â”€â”€ vite.config.ts     # Vite é…ç½®
â”œâ”€â”€ desktop/               # æ¡Œé¢åº”ç”¨
â”‚   â”œâ”€â”€ main.py           # æ¡Œé¢åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ ccg-gateway.spec  # PyInstaller é…ç½®
â”‚   â””â”€â”€ icon.ico          # åº”ç”¨å›¾æ ‡
â”œâ”€â”€ data/                 # æ•°æ®å­˜å‚¨ç›®å½•
â”‚   â”œâ”€â”€ ccg_gateway.db   # SQLite æ•°æ®åº“
â”‚   â””â”€â”€ logs/            # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ build.bat            # æ„å»ºè„šæœ¬
â”œâ”€â”€ start-backend.bat    # åç«¯å¯åŠ¨è„šæœ¬
â””â”€â”€ start-frontend.bat   # å‰ç«¯å¯åŠ¨è„šæœ¬
```

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. æ™ºèƒ½è·¯ç”±ä¸è´Ÿè½½å‡è¡¡

- **ä¼˜å…ˆçº§è·¯ç”±**ï¼šæ ¹æ®é…ç½®çš„ä¼˜å…ˆçº§è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜æœåŠ¡å•†
- **å¥åº·æ£€æŸ¥**ï¼šå®æ—¶ç›‘æ§æœåŠ¡å•†çŠ¶æ€ï¼Œè‡ªåŠ¨å‰”é™¤æ•…éšœèŠ‚ï¿½ï¿½
- **é»‘åå•æœºåˆ¶**ï¼šä¸´æ—¶å±è”½è¿ç»­å¤±è´¥çš„æœåŠ¡å•†ï¼Œé¿å…é‡å¤è¯·æ±‚
- **è‡ªåŠ¨æ¢å¤**ï¼šå®šæœŸå°è¯•æ¢å¤é»‘åå•ä¸­çš„æœåŠ¡å•†

### 2. æ¨¡å‹æ˜ å°„ç®¡ç†

æ”¯æŒå°†å®¢æˆ·ç«¯è¯·æ±‚çš„æ¨¡å‹åæ˜ å°„åˆ°ä¸åŒæœåŠ¡å•†çš„å®é™…æ¨¡å‹ï¼š

```json
{
  "cli_type": "claude-code",
  "client_model": "claude-opus-4",
  "provider_model": "claude-opus-4-20250514"
}
```

### 3. å¤š CLI å·¥å…·æ”¯æŒ

- **Claude Code** - Anthropic å®˜æ–¹ CLI å·¥å…·
- **Codex** - ä»£ç ç”Ÿæˆä¸“ç”¨ CLI
- **Gemini** - Google AI CLI å·¥å…·

æ¯ä¸ª CLI å·¥å…·ç‹¬ç«‹é…ç½®ï¼Œäº’ä¸å¹²æ‰°ã€‚

### 4. è¯·æ±‚æ—¥å¿—ä¸ç»Ÿè®¡

- **è¯¦ç»†æ—¥å¿—**ï¼šè®°å½•æ¯ä¸ªè¯·æ±‚çš„å®Œæ•´ä¿¡æ¯ï¼ˆè¯·æ±‚å¤´ã€è¯·æ±‚ä½“ã€å“åº”ç­‰ï¼‰
- **ç³»ç»Ÿæ—¥å¿—**ï¼šè®°å½•æœåŠ¡å•†åˆ‡æ¢ã€æ•…éšœç­‰ç³»ç»Ÿäº‹ä»¶
- **ä½¿ç”¨ç»Ÿè®¡**ï¼šæŒ‰æ—¥ç»Ÿè®¡å„ CLI å·¥å…·çš„ä½¿ç”¨æƒ…å†µ
- **æ€§èƒ½åˆ†æ**ï¼šå“åº”æ—¶é—´ã€æˆåŠŸç‡ç­‰å…³é”®æŒ‡æ ‡

### 5. é…ç½®ç®¡ç†

- **MCP é…ç½®**ï¼šæ”¯æŒ Model Context Protocol é…ç½®
- **æç¤ºè¯é¢„è®¾**ï¼šé¢„è®¾å¸¸ç”¨æç¤ºè¯æ¨¡æ¿
- **è¶…æ—¶è®¾ç½®**ï¼šå¯é…ç½®æµå¼å’Œéæµå¼è¯·æ±‚çš„è¶…æ—¶æ—¶é—´
- **å¤‡ä»½æ¢å¤**ï¼šæ”¯æŒé…ç½®çš„å¯¼å‡ºå’Œå¯¼å…¥

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡é…ç½®

åœ¨ `backend` ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
# ç½‘å…³ç«¯å£
GATEWAY_PORT=8000

# æ—¥å¿—é…ç½®
LOG_LEVEL=INFO
LOG_TO_FILE=true

# æ•°æ®åº“è·¯å¾„
DATABASE_URL=sqlite+aiosqlite:///./data/ccg_gateway.db

# è¶…æ—¶è®¾ç½®ï¼ˆç§’ï¼‰
STREAM_TIMEOUT=300
NON_STREAM_TIMEOUT=60
```

### æœåŠ¡å•†é…ç½®

é€šè¿‡ Web ç•Œé¢æˆ– API é…ç½®æœåŠ¡å•†ï¼š

```json
{
  "name": "Provider 1",
  "base_url": "https://api.example.com",
  "api_key": "your-api-key",
  "priority": 1,
  "is_active": true,
  "cli_type": "claude-code"
}
```

## ğŸ”§ å¼€å‘æŒ‡å—

### åç«¯å¼€å‘

```bash
cd backend

# å®‰è£…å¼€å‘ä¾èµ–
uv sync --dev

# è¿è¡Œæµ‹è¯•
uv run pytest

# ä»£ç æ ¼å¼åŒ–
uv run black app/
uv run isort app/

# ç±»å‹æ£€æŸ¥
uv run mypy app/
```

### å‰ç«¯å¼€å‘

```bash
cd frontend

# å®‰è£…ä¾èµ–
pnpm install

# å¼€å‘æ¨¡å¼
pnpm dev

# ç±»å‹æ£€æŸ¥
pnpm type-check

# ä»£ç æ£€æŸ¥
pnpm lint

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm build
```

### æ¡Œé¢åº”ç”¨å¼€å‘

```bash
# å¼€å‘æ¨¡å¼è¿è¡Œ
cd desktop
uv run python main.py

# æ‰“åŒ…åº”ç”¨
cd ..
build.bat
```

## ğŸ“¦ éƒ¨ç½²æ–¹å¼

### æ–¹å¼ä¸€ï¼šæ¡Œé¢åº”ç”¨ï¼ˆæ¨èï¼‰

é€‚åˆä¸ªäººä½¿ç”¨ï¼Œæä¾›åŸç”Ÿæ¡Œé¢ä½“éªŒï¼š

1. è¿è¡Œ `build.bat` æ„å»ºåº”ç”¨
2. åœ¨ `backend/dist/ccg-gateway/` ç›®å½•æ‰¾åˆ°å¯æ‰§è¡Œæ–‡ä»¶
3. åŒå‡»è¿è¡Œï¼Œè‡ªåŠ¨å¯åŠ¨ç³»ç»Ÿæ‰˜ç›˜åº”ç”¨

### æ–¹å¼äºŒï¼šWeb æœåŠ¡

é€‚åˆå›¢é˜Ÿä½¿ç”¨æˆ–è¿œç¨‹è®¿é—®ï¼š

1. æ„å»ºå‰ç«¯ï¼š`cd frontend && pnpm build`
2. é…ç½®åç«¯é™æ€æ–‡ä»¶æœåŠ¡
3. ä½¿ç”¨ systemd/supervisor ç®¡ç†åç«¯è¿›ç¨‹
4. é…ç½® Nginx åå‘ä»£ç†ï¼ˆå¯é€‰ï¼‰

### æ–¹å¼ä¸‰ï¼šDocker éƒ¨ç½²

```bash
# æ„å»ºé•œåƒ
docker build -t ccg-gateway .

# è¿è¡Œå®¹å™¨
docker run -d \
  -p 8000:8000 \
  -v ./data:/app/data \
  --name ccg-gateway \
  ccg-gateway
```

## ğŸ”’ å®‰å…¨å»ºè®®

1. **API å¯†é’¥ç®¡ç†**ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–å¯†é’¥ç®¡ç†æœåŠ¡å­˜å‚¨æ•æ„Ÿä¿¡æ¯
2. **è®¿é—®æ§åˆ¶**ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒé…ç½®é˜²ç«å¢™è§„åˆ™ï¼Œé™åˆ¶è®¿é—®æ¥æº
3. **HTTPS**ï¼šä½¿ç”¨åå‘ä»£ç†é…ç½® SSL/TLS è¯ä¹¦
4. **æ—¥å¿—è„±æ•**ï¼šé¿å…åœ¨æ—¥å¿—ä¸­è®°å½•å®Œæ•´çš„ API å¯†é’¥
5. **å®šæœŸæ›´æ–°**ï¼šåŠæ—¶æ›´æ–°ä¾èµ–åŒ…ï¼Œä¿®å¤å®‰å…¨æ¼æ´

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ™ è‡´è°¢

- [FastAPI](https://fastapi.tiangolo.com/) - ç°ä»£åŒ–çš„ Python Web æ¡†æ¶
- [Vue.js](https://vuejs.org/) - æ¸è¿›å¼ JavaScript æ¡†æ¶
- [Element Plus](https://element-plus.org/) - ä¼˜ç§€çš„ Vue 3 ç»„ä»¶åº“
- [PyWebView](https://pywebview.flowrl.com/) - è½»é‡çº§æ¡Œé¢åº”ç”¨æ¡†æ¶

## ğŸ“® è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- æäº¤ [Issue](https://github.com/yourusername/ccg-gateway/issues)
- å‘é€é‚®ä»¶è‡³ï¼šyour.email@example.com

---

<div align="center">

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ª â­ï¸ Star æ”¯æŒä¸€ä¸‹ï¼**

Made with â¤ï¸ by CCG Team

</div>
